<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="If you’re using a disk that has been part of a RAID and you can’t find the dev device after a re-format &amp;amp; re-partition then it may need to have it’s superblock erased.
How To Check The Super Block Using Mdadm By running the following command, you can see that it is still apart of a raid, even after a format and erasing all the partitions.
mdadm -Evvv /dev/sda /dev/sda: Magic : xxxx Version : 1."><meta name=keywords content><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=/posts/mdraid-fix-superblock/><title>mdraid and how to fix the superblock :: teh.su — linux; docker; kubernetes; python;</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.4e5c639214707eff609bb55fe49e183dee42258a73bc90e4cc7b0a84f900798a.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><meta name=msapplication-TileColor content><meta itemprop=name content="mdraid and how to fix the superblock"><meta itemprop=description content="If you’re using a disk that has been part of a RAID and you can’t find the dev device after a re-format & re-partition then it may need to have it’s superblock erased.
How To Check The Super Block Using Mdadm By running the following command, you can see that it is still apart of a raid, even after a format and erasing all the partitions.
mdadm -Evvv /dev/sda /dev/sda: Magic : xxxx Version : 1."><meta itemprop=datePublished content="2022-06-26T17:44:14-05:00"><meta itemprop=dateModified content="2022-06-26T17:44:14-05:00"><meta itemprop=wordCount content="290"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="mdraid and how to fix the superblock"><meta name=twitter:description content="If you’re using a disk that has been part of a RAID and you can’t find the dev device after a re-format & re-partition then it may need to have it’s superblock erased.
How To Check The Super Block Using Mdadm By running the following command, you can see that it is still apart of a raid, even after a format and erasing all the partitions.
mdadm -Evvv /dev/sda /dev/sda: Magic : xxxx Version : 1."><meta property="article:published_time" content="2022-06-26 17:44:14 -0500 -0500"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>teh.su #</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about>about</a></li><li><a href=/posts>posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 minutes</p></div><article><h1 class=post-title><a href=/posts/mdraid-fix-superblock/>mdraid and how to fix the superblock</a></h1><div class=post-content><p>If you’re using a disk that has been part of a RAID and you can’t find the dev device after a re-format & re-partition then it may need to have it’s superblock erased.</p><h1 id=how-to-check-the-super-block-using-mdadm>How To Check The Super Block Using Mdadm</h1><p>By running the following command, you can see that it is still apart of a raid, even after a format and erasing all the partitions.</p><pre><code>mdadm -Evvv /dev/sda

/dev/sda:
        Magic : xxxx
        Version : 1.2
    Feature Map : 0x1
    Array UUID : xxxx
        Name : node1:0
Creation Time : Wed Jul 31 22:26:03 2019
    Raid Level : raid1
Raid Devices : 2

Avail Dev Size : 488132976 (232.76 GiB 249.92 GB)
    Array Size : 234297344 (223.44 GiB 239.92 GB)
Used Dev Size : 468594688 (223.44 GiB 239.92 GB)
    Data Offset : 264192 sectors
Super Offset : 8 sectors
Unused Space : before=264112 sectors, after=19538288 sectors
        State : clean
    Device UUID : xxxx

Internal Bitmap : 8 sectors from superblock
    Update Time : Sun Jun 26 10:49:28 2022
Bad Block Log : 512 entries available at offset 16 sectors
    Checksum : e379e3b5 - correct
        Events : 67497329


Device Role : Active device 1
Array State : AA ('A' == active, '.' == missing, 'R' == replacing)
</code></pre><h1 id=how-to-fix-it>How To Fix It?</h1><p>You can run the following command against the entire disk and zero out the superblock, above, you can see that there is a raid set against the disk. Once we run the fix you’ll see my output, the raid is gone.</p><pre><code>mdadm --zero-superblock /dev/sda
/dev/sda:
MBR Magic : xxxx
Partition[0] :    468858880 sectors at         2048 (type fd)
</code></pre><h1 id=while-this-was-a-quick-fix-always-use-a-clean-disk-you-could-easily-mess-up-a-raid-by-importing-the-wrong-disk>While This Was A Quick Fix. Always Use A Clean Disk, You Could Easily Mess Up A Raid By Importing The Wrong Disk.</h1></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>290 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2022-06-26 22:44</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/replace-failed-mdraid/><span class=button__icon>←</span>
<span class=button__text>Replace A Failed Disk In A MD Raid (RAID1)</span></a></span>
<span class="button next"><a href=/posts/docker-mysql-backup/><span class=button__text>Automate MySQL Backups using Docker</span>
<span class=button__icon>→</span></a></span></div></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.feebdc8d801e3fb1791305e362b6d11557f029604dd5b3c27e2686bc88787ee90ae1ccf0afe81bd7d959d7617cfe1fc73062aa82b4e1fa830d6941193d2cbddf.js integrity="sha512-/uvcjYAeP7F5EwXjYrbRFVfwKWBN1bPCfiaGvIh4fukK4czwr+gb19lZ12F8/h/HMGKqgrTh+oMNaUEZPSy93w=="></script></body></html>